parameters:
- name: environmentName
  type: string
- name: dependsOn
  type: object
  default: []

stages:
- stage: Deploy_${{ parameters.environmentName }}
  dependsOn: ${{ parameters.dependsOn }}
  variables:
    artifactPath: $[ stageDependencies.Build.BuildJob.outputs['setPath.artifactPath'] ]
  jobs:
  - deployment: DeployTo${{ parameters.environmentName }}
    environment: ${{ parameters.environmentName }}
    strategy:
      runOnce:
        deploy:
          steps:
          - script: |
              echo "Deploying to ${{ parameters.environmentName }}"
              echo "Artifact path: $(artifactPath)"

